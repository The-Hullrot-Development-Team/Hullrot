using Content.Client.UserInterface.Controls;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;
using Serilog;

namespace Content.Client.Arcade.SpaceVillain;

[GenerateTypedNameReferences]
public sealed partial class SpaceVillainArcadeMenu : FancyWindow
{
    public Action? OnAttack;
    public Action? OnHeal;
    public Action? OnRecharge;
    public Action? OnNewGame;

    public SpaceVillainArcadeMenu()
    {
        RobustXamlLoader.Load(this);

        AttackButton.OnPressed += _ => OnAttack?.Invoke();
        HealButton.OnPressed += _ => OnHeal?.Invoke();
        RechargeButton.OnPressed += _ => OnRecharge?.Invoke();
        NewGameButton.OnPressed += _ => OnNewGame?.Invoke();
    }

    /// <summary>
    ///
    /// </summary>
    public void UpdateData(int playerHP, int playerMP, string villainName, int villainHP, int villainMP, string playerStatus, string villainStatus)
    {
        var unactive = playerHP == 0 || playerMP == 0 || villainHP == 0 || villainMP == 0;

        AttackButton.Disabled = unactive;
        HealButton.Disabled = unactive;
        RechargeButton.Disabled = unactive;

        PlayerHPLabel.Text = $"HP: {playerHP}";
        PlayerMPLabel.Text = $"MP: {playerMP}";

        VillainNameLabel.Text = villainName;
        VillainHPLabel.Text = $"HP: {villainHP}";
        VillainMPLabel.Text = $"MP: {villainMP}";

        PlayerStatusLabel.Text = playerStatus;
        VillainStatusLabel.Text = villainStatus;
    }
}
